export function detectGs1Country(raw, t) {
  const digits = String(raw).replace(/[^0-9]/g, '');
  if (digits.length < 3) return null;
  const prefix = parseInt(digits.slice(0, 3), 10);
  if (Number.isNaN(prefix)) return null;

  const ranges = [
    [[1, 19], 'country.usa', 'ðŸ‡ºðŸ‡¸'],
    [[30, 39], 'country.usa', 'ðŸ‡ºðŸ‡¸'],
    [[60, 99], 'country.usa', 'ðŸ‡ºðŸ‡¸'],
    [[100, 139], 'country.usa', 'ðŸ‡ºðŸ‡¸'],
    [[300, 379], 'country.france', 'ðŸ‡«ðŸ‡·'],
    [[380, 380], 'country.bulgaria', 'ðŸ‡§ðŸ‡¬'],
    [[383, 383], 'country.slovenia', 'ðŸ‡¸ðŸ‡®'],
    [[385, 385], 'country.croatia', 'ðŸ‡­ðŸ‡·'],
    [[387, 387], 'country.bosnia', 'ðŸ‡§ðŸ‡¦'],
    [[389, 389], 'country.montenegro', 'ðŸ‡²ðŸ‡ª'],
    [[400, 440], 'country.germany', 'ðŸ‡©ðŸ‡ª'],
    [[450, 459], 'country.japan', 'ðŸ‡¯ðŸ‡µ'],
    [[460, 469], 'country.russia', 'ðŸ‡·ðŸ‡º'],
    [[471, 471], 'country.taiwan', 'ðŸ‡¹ðŸ‡¼'],
    [[474, 474], 'country.estonia', 'ðŸ‡ªðŸ‡ª'],
    [[475, 475], 'country.latvia', 'ðŸ‡±ðŸ‡»'],
    [[476, 476], 'country.azerbaijan', 'ðŸ‡¦ðŸ‡¿'],
    [[477, 477], 'country.lithuania', 'ðŸ‡±ðŸ‡¹'],
    [[478, 478], 'country.uzbekistan', 'ðŸ‡ºðŸ‡¿'],
    [[479, 479], 'country.sriLanka', 'ðŸ‡±ðŸ‡°'],
    [[480, 480], 'country.philippines', 'ðŸ‡µðŸ‡­'],
    [[481, 481], 'country.belarus', 'ðŸ‡§ðŸ‡¾'],
    [[482, 482], 'country.ukraine', 'ðŸ‡ºðŸ‡¦'],
    [[483, 483], 'country.turkmenistan', 'ðŸ‡¹ðŸ‡²'],
    [[484, 484], 'country.moldova', 'ðŸ‡²ðŸ‡©'],
    [[485, 485], 'country.armenia', 'ðŸ‡¦ðŸ‡²'],
    [[486, 486], 'country.georgia', 'ðŸ‡¬ðŸ‡ª'],
    [[487, 487], 'country.kazakhstan', 'ðŸ‡°ðŸ‡¿'],
    [[488, 488], 'country.tajikistan', 'ðŸ‡¹ðŸ‡¯'],
    [[489, 489], 'country.hongKong', 'ðŸ‡­ðŸ‡°'],
    [[490, 499], 'country.japan', 'ðŸ‡¯ðŸ‡µ'],
    [[500, 509], 'country.uk', 'ðŸ‡¬ðŸ‡§'],
    [[520, 521], 'country.greece', 'ðŸ‡¬ðŸ‡·'],
    [[528, 528], 'country.lebanon', 'ðŸ‡±ðŸ‡§'],
    [[529, 529], 'country.cyprus', 'ðŸ‡¨ðŸ‡¾'],
    [[530, 530], 'country.albania', 'ðŸ‡¦ðŸ‡±'],
    [[531, 531], 'country.macedonia', 'ðŸ‡²ðŸ‡°'],
    [[535, 535], 'country.malta', 'ðŸ‡²ðŸ‡¹'],
    [[539, 539], 'country.ireland', 'ðŸ‡®ðŸ‡ª'],
    [[540, 549], 'country.belgium', 'ðŸ‡§ðŸ‡ª'],
    [[560, 560], 'country.portugal', 'ðŸ‡µðŸ‡¹'],
    [[569, 569], 'country.iceland', 'ðŸ‡®ðŸ‡¸'],
    [[570, 579], 'country.denmark', 'ðŸ‡©ðŸ‡°'],
    [[590, 590], 'country.poland', 'ðŸ‡µðŸ‡±'],
    [[594, 594], 'country.romania', 'ðŸ‡·ðŸ‡´'],
    [[599, 599], 'country.hungary', 'ðŸ‡­ðŸ‡º'],
    [[600, 601], 'country.southAfrica', 'ðŸ‡¿ðŸ‡¦'],
    [[608, 608], 'country.bahrain', 'ðŸ‡§ðŸ‡­'],
    [[611, 611], 'country.morocco', 'ðŸ‡²ðŸ‡¦'],
    [[613, 613], 'country.algeria', 'ðŸ‡©ðŸ‡¿'],
    [[616, 616], 'country.kenya', 'ðŸ‡°ðŸ‡ª'],
    [[619, 619], 'country.tunisia', 'ðŸ‡¹ðŸ‡³'],
    [[621, 621], 'country.syria', 'ðŸ‡¸ðŸ‡¾'],
    [[622, 622], 'country.egypt', 'ðŸ‡ªðŸ‡¬'],
    [[624, 624], 'country.libya', 'ðŸ‡±ðŸ‡¾'],
    [[625, 625], 'country.jordan', 'ðŸ‡¯ðŸ‡´'],
    [[626, 626], 'country.iran', 'ðŸ‡®ðŸ‡·'],
    [[627, 627], 'country.kuwait', 'ðŸ‡°ðŸ‡¼'],
    [[628, 628], 'country.saudiArabia', 'ðŸ‡¸ðŸ‡¦'],
    [[629, 629], 'country.uae', 'ðŸ‡¦ðŸ‡ª'],
    [[640, 649], 'country.finland', 'ðŸ‡«ðŸ‡®'],
    [[680, 681], 'country.china', 'ðŸ‡¨ðŸ‡³'],
    [[690, 699], 'country.china', 'ðŸ‡¨ðŸ‡³'],
    [[700, 709], 'country.norway', 'ðŸ‡³ðŸ‡´'],
    [[729, 729], 'country.israel', 'ðŸ‡®ðŸ‡±'],
    [[730, 739], 'country.sweden', 'ðŸ‡¸ðŸ‡ª'],
    [[740, 740], 'country.guatemala', 'ðŸ‡¬ðŸ‡¹'],
    [[741, 741], 'country.elSalvador', 'ðŸ‡¸ðŸ‡»'],
    [[742, 742], 'country.honduras', 'ðŸ‡­ðŸ‡³'],
    [[743, 743], 'country.nicaragua', 'ðŸ‡³ðŸ‡®'],
    [[744, 744], 'country.costaRica', 'ðŸ‡¨ðŸ‡·'],
    [[745, 745], 'country.panama', 'ðŸ‡µðŸ‡¦'],
    [[746, 746], 'country.dominican', 'ðŸ‡©ðŸ‡´'],
    [[750, 750], 'country.mexico', 'ðŸ‡²ðŸ‡½'],
    [[754, 755], 'country.canada', 'ðŸ‡¨ðŸ‡¦'],
    [[759, 759], 'country.venezuela', 'ðŸ‡»ðŸ‡ª'],
    [[760, 769], 'country.switzerland', 'ðŸ‡¨ðŸ‡­'],
    [[770, 771], 'country.colombia', 'ðŸ‡¨ðŸ‡´'],
    [[773, 773], 'country.uruguay', 'ðŸ‡ºðŸ‡¾'],
    [[775, 775], 'country.peru', 'ðŸ‡µðŸ‡ª'],
    [[777, 777], 'country.bolivia', 'ðŸ‡§ðŸ‡´'],
    [[778, 779], 'country.argentina', 'ðŸ‡¦ðŸ‡·'],
    [[780, 780], 'country.chile', 'ðŸ‡¨ðŸ‡±'],
    [[784, 784], 'country.paraguay', 'ðŸ‡µðŸ‡¾'],
    [[786, 786], 'country.ecuador', 'ðŸ‡ªðŸ‡¨'],
    [[789, 790], 'country.brazil', 'ðŸ‡§ðŸ‡·'],
    [[800, 839], 'country.italy', 'ðŸ‡®ðŸ‡¹'],
    [[840, 849], 'country.spain', 'ðŸ‡ªðŸ‡¸'],
    [[850, 850], 'country.cuba', 'ðŸ‡¨ðŸ‡º'],
    [[858, 858], 'country.slovakia', 'ðŸ‡¸ðŸ‡°'],
    [[859, 859], 'country.czech', 'ðŸ‡¨ðŸ‡¿'],
    [[860, 860], 'country.serbia', 'ðŸ‡·ðŸ‡¸'],
    [[865, 865], 'country.mongolia', 'ðŸ‡²ðŸ‡³'],
    [[867, 867], 'country.northKorea', 'ðŸ‡°ðŸ‡µ'],
    [[868, 869], 'country.turkey', 'ðŸ‡¹ðŸ‡·'],
    [[870, 879], 'country.netherlands', 'ðŸ‡³ðŸ‡±'],
    [[880, 881], 'country.southKorea', 'ðŸ‡°ðŸ‡·'],
    [[883, 883], 'country.myanmar', 'ðŸ‡²ðŸ‡²'],
    [[884, 884], 'country.cambodia', 'ðŸ‡°ðŸ‡­'],
    [[885, 885], 'country.thailand', 'ðŸ‡¹ðŸ‡­'],
    [[888, 888], 'country.singapore', 'ðŸ‡¸ðŸ‡¬'],
    [[890, 890], 'country.india', 'ðŸ‡®ðŸ‡³'],
    [[893, 893], 'country.vietnam', 'ðŸ‡»ðŸ‡³'],
    [[894, 894], 'country.bangladesh', 'ðŸ‡§ðŸ‡©'],
    [[896, 896], 'country.pakistan', 'ðŸ‡µðŸ‡°'],
    [[899, 899], 'country.indonesia', 'ðŸ‡®ðŸ‡©'],
    [[900, 919], 'country.austria', 'ðŸ‡¦ðŸ‡¹'],
    [[930, 939], 'country.australia', 'ðŸ‡¦ðŸ‡º'],
    [[940, 949], 'country.newZealand', 'ðŸ‡³ðŸ‡¿'],
    [[955, 955], 'country.malaysia', 'ðŸ‡²ðŸ‡¾'],
    [[958, 958], 'country.macao', 'ðŸ‡²ðŸ‡´'],
    [[977, 977], 'country.issn', 'ðŸ“°'],
    [[978, 979], 'country.isbn', 'ðŸ“š'],
    [[980, 980], 'country.refund_receipt', 'ðŸ§¾'],
    [[981, 984], 'country.coupon_common', 'ðŸŽŸï¸'],
    [[990, 999], 'country.coupon', 'ðŸŽŸï¸'],
  ];

  for (const [[from, to], key, flag] of ranges) {
    if (prefix >= from && prefix <= to) {
      return {
        name: t ? t(key) : key,
        flag,
        key
      };
    }
  }
  return null;
}
